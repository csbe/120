package ch.csbe.rechner;

import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;

import javafx.event.ActionEvent;
import javafx.fxml.FXML;
import javafx.scene.control.Label;
import javafx.scene.input.MouseEvent;

public class CalcController {

	@FXML protected Label output;
	@FXML protected Label calc;
	private String locout = "";
	
	@FXML protected void calc(MouseEvent event) throws ScriptException{
		Label l = (Label) event.getSource();
		
		switch(l.getText()){
		case "C": calc.setText("");
		case "CE": output.setText(""); locout=""; break;
		case "=": 
			ScriptEngine engine =
            new ScriptEngineManager().getEngineByName("JavaScript");
			calc.setText(""); output.setText(engine.eval(locout).toString()); locout=""; break;
		case ":": ; 
		case "*": ; 
		case "-": ; 
		case "+": calc.setText(locout+" "+l.getText());
				  locout = ""; break;
		default: 
			output.setText(locout+l.getText()); 
			locout += l.getText(); break;
		}
		
	}
	
}
